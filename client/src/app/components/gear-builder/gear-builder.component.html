<div id="page">
  <div class="col">
    <button type="button" class="charDef" (click)="nav()" id="backButton">
      <div class="images">
        <img src="{{this.constants.API_VERSION}}/images/characters?name={{this.name}}" alt="{{this.name}}" class="charPortrait">
        <img src="{{this.constants.API_VERSION}}/images/icons/class?name={{this.constants.CLASS_ENUM[this.char?(this.char.class):(0)]}}" alt="element" class="classImg">
        <img src="{{this.constants.API_VERSION}}/images/icons/element?name={{this.constants.ELEMENT_ENUM[this.char?(this.char.element):(0)]}}" alt="element" class="classImg">
      </div>
    </button>
    <div id="base_stats">
      <h1>Base Stats</h1>
      <p *ngFor="let key of this.statkeys" style="display: flex; align-items: center;">
        <img src="/api/v1/images/icons/stats?name={{key}}" alt="">
        {{key}} :  {{getVal(key)}}
      </p>
    </div>
  </div>
  <div class="col" *ngFor="let col of [[0,1,2],[3,4,5]]">
    <div *ngFor="let card of col" class="equipmentCard">
      <div class="input-group">
        <span class="input-group-text col-1">Gear set:</span>
        <select class="form-select set-select" [(ngModel)]="gear[card].type" aria-label="Select gear set">
          <option *ngFor="let opt of this.constants.GEAR_ENUM; let i = index" [value]="+i">
            {{opt}}
          </option>
        </select>
        <span class="input-group-text" *ngIf="gear[card].type!==undefined" style="background-image: url('{{this.constants.API_VERSION}}/images/icons/gearSets?name={{this.constants.GEAR_ENUM[gear[card].type!]}}');background-repeat: no-repeat;background-position: center center;"></span>
        <span class="input-group-text" *ngIf="!gear[card].type"></span>
        <span class="input-group-text" style="width: 60px;">Level:</span>
        <select class="form-select" id="{{card}}_level-select" [(ngModel)]="gear[card].level" aria-label="Select gear level">
          <option *ngFor="let opt of this.constants.LEVEL_ENUM; let i = index" [value]="+i">
            {{opt}}
          </option>
        </select>
      </div>
      <div class="input-group">
        <span class="input-group-text col-1">Main stat:</span>
        <select class="form-select" [(ngModel)]="gear[card].main" aria-label="Select main stat" disabled="{{(card<3?(true):(false))}}">
          <option *ngFor="let opt of this.constants.STAT_ENUM; let i = index" [value]="+i">
            {{opt.name}}
          </option>
        </select>
        <span class="input-group-text">{{constants.STAT_ENUM[gear[card].main].main[gear[card].level]}}</span>
        <span class="input-group-text"style="background-image: url('{{this.constants.API_VERSION}}/images/icons/stats?name={{this.constants.STAT_ENUM[gear[card].main].name}}');background-repeat: no-repeat;background-position: center center;"></span>
      </div>
      <div style="display: flex; width: 100%;">
        <!-- The *ngfor loop caused render errors -->
        <!-- <div *ngFor="let col of gear[card].hits; let i = index;">
          <div class="btn-group-vertical" role="group" aria-label="Vertical radio toggle button group">
            <input *ngFor="let row of gear[card].subs; let j = index" type="radio" class="btn-check" name="{{i}}_radio" id="{{i}}_{{j}}" autocomplete="off" (click)="gear[card].hits[i]=j;debugg({i,j,bool:gear[card].hits[i]===j})" [checked]="gear[card].hits[i]===j">
            <label *ngFor="let row of gear[card].subs; let j = index" class="btn btn-light" for="{{i}}_{{j}}">+{{(i+1)*3}}</label>
          </div>
        </div> -->
        <div style="display: flex; width: 50%;"><!--Left box-->
          <div class="btn-group-vertical" role="group" aria-label="Vertical radio toggle button group">
            <input type="radio" class="btn-check" name="{{card}}_0_radio" id="{{card}}_0_1" autocomplete="off" (click)="gear[card].hits[0]=0;debugg({card,i:0,val:0,hits:gear[card].hits,gear:gear[card]});debugg(gear)" [checked]="gear[card].hits[0]===0"> <label class="btn btn-light" for="{{card}}_0_1">+{{(0+1)*3}}</label>
            <input type="radio" class="btn-check" name="{{card}}_0_radio" id="{{card}}_0_2" autocomplete="off" (click)="gear[card].hits[0]=1;debugg({card,i:0,val:1,hits:gear[card].hits,gear:gear[card]});debugg(gear)" [checked]="gear[card].hits[0]===1"> <label class="btn btn-light" for="{{card}}_0_2">+{{(0+1)*3}}</label>
            <input type="radio" class="btn-check" name="{{card}}_0_radio" id="{{card}}_0_3" autocomplete="off" (click)="gear[card].hits[0]=2;debugg({card,i:0,val:2,hits:gear[card].hits,gear:gear[card]});debugg(gear)" [checked]="gear[card].hits[0]===2"> <label class="btn btn-light" for="{{card}}_0_3">+{{(0+1)*3}}</label>
            <input type="radio" class="btn-check" name="{{card}}_0_radio" id="{{card}}_0_4" autocomplete="off" (click)="gear[card].hits[0]=3;debugg({card,i:0,val:3,hits:gear[card].hits,gear:gear[card]});debugg(gear)" [checked]="gear[card].hits[0]===3"> <label class="btn btn-light" for="{{card}}_0_4">+{{(0+1)*3}}</label>
          </div>
          <div class="btn-group-vertical" role="group" aria-label="Vertical radio toggle button group">
            <input type="radio" class="btn-check" name="{{card}}_1_radio" id="{{card}}_1_1" autocomplete="off" (click)="gear[card].hits[1]=0;debugg({card,i:1,val:0,hits:gear[card].hits,gear:gear[card]});debugg(gear)" [checked]="gear[card].hits[1]===0"> <label class="btn btn-light" for="{{card}}_1_1">+{{(1+1)*3}}</label>
            <input type="radio" class="btn-check" name="{{card}}_1_radio" id="{{card}}_1_2" autocomplete="off" (click)="gear[card].hits[1]=1;debugg({card,i:1,val:1,hits:gear[card].hits,gear:gear[card]});debugg(gear)" [checked]="gear[card].hits[1]===1"> <label class="btn btn-light" for="{{card}}_1_2">+{{(1+1)*3}}</label>
            <input type="radio" class="btn-check" name="{{card}}_1_radio" id="{{card}}_1_3" autocomplete="off" (click)="gear[card].hits[1]=2;debugg({card,i:1,val:2,hits:gear[card].hits,gear:gear[card]});debugg(gear)" [checked]="gear[card].hits[1]===2"> <label class="btn btn-light" for="{{card}}_1_3">+{{(1+1)*3}}</label>
            <input type="radio" class="btn-check" name="{{card}}_1_radio" id="{{card}}_1_4" autocomplete="off" (click)="gear[card].hits[1]=3;debugg({card,i:1,val:3,hits:gear[card].hits,gear:gear[card]});debugg(gear)" [checked]="gear[card].hits[1]===3"> <label class="btn btn-light" for="{{card}}_1_4">+{{(1+1)*3}}</label>
          </div>
          <div class="btn-group-vertical" role="group" aria-label="Vertical radio toggle button group">
            <input type="radio" class="btn-check" name="{{card}}_2_radio" id="{{card}}_2_1" autocomplete="off" (click)="gear[card].hits[2]=0;debugg({card,i:2,val:0,hits:gear[card].hits,gear:gear[card]});debugg(gear)" [checked]="gear[card].hits[2]===0"> <label class="btn btn-light" for="{{card}}_2_1">+{{(2+1)*3}}</label>
            <input type="radio" class="btn-check" name="{{card}}_2_radio" id="{{card}}_2_2" autocomplete="off" (click)="gear[card].hits[2]=1;debugg({card,i:2,val:1,hits:gear[card].hits,gear:gear[card]});debugg(gear)" [checked]="gear[card].hits[2]===1"> <label class="btn btn-light" for="{{card}}_2_2">+{{(2+1)*3}}</label>
            <input type="radio" class="btn-check" name="{{card}}_2_radio" id="{{card}}_2_3" autocomplete="off" (click)="gear[card].hits[2]=2;debugg({card,i:2,val:2,hits:gear[card].hits,gear:gear[card]});debugg(gear)" [checked]="gear[card].hits[2]===2"> <label class="btn btn-light" for="{{card}}_2_3">+{{(2+1)*3}}</label>
            <input type="radio" class="btn-check" name="{{card}}_2_radio" id="{{card}}_2_4" autocomplete="off" (click)="gear[card].hits[2]=3;debugg({card,i:2,val:3,hits:gear[card].hits,gear:gear[card]});debugg(gear)" [checked]="gear[card].hits[2]===3"> <label class="btn btn-light" for="{{card}}_2_4">+{{(2+1)*3}}</label>
          </div>
          <div class="btn-group-vertical" role="group" aria-label="Vertical radio toggle button group">
            <input type="radio" class="btn-check" name="{{card}}_3_radio" id="{{card}}_3_1" autocomplete="off" (click)="gear[card].hits[3]=0;debugg({card,i:3,val:0,hits:gear[card].hits,gear:gear[card]});debugg(gear)" [checked]="gear[card].hits[3]===0"> <label class="btn btn-light" for="{{card}}_3_1">+{{(3+1)*3}}</label>
            <input type="radio" class="btn-check" name="{{card}}_3_radio" id="{{card}}_3_2" autocomplete="off" (click)="gear[card].hits[3]=1;debugg({card,i:3,val:1,hits:gear[card].hits,gear:gear[card]});debugg(gear)" [checked]="gear[card].hits[3]===1"> <label class="btn btn-light" for="{{card}}_3_2">+{{(3+1)*3}}</label>
            <input type="radio" class="btn-check" name="{{card}}_3_radio" id="{{card}}_3_3" autocomplete="off" (click)="gear[card].hits[3]=2;debugg({card,i:3,val:2,hits:gear[card].hits,gear:gear[card]});debugg(gear)" [checked]="gear[card].hits[3]===2"> <label class="btn btn-light" for="{{card}}_3_3">+{{(3+1)*3}}</label>
            <input type="radio" class="btn-check" name="{{card}}_3_radio" id="{{card}}_3_4" autocomplete="off" (click)="gear[card].hits[3]=3;debugg({card,i:3,val:3,hits:gear[card].hits,gear:gear[card]});debugg(gear)" [checked]="gear[card].hits[3]===3"> <label class="btn btn-light" for="{{card}}_3_4">+{{(3+1)*3}}</label>
          </div>
          <div class="btn-group-vertical" role="group" aria-label="Vertical radio toggle button group">
            <input type="radio" class="btn-check" name="{{card}}_4_radio" id="{{card}}_4_1" autocomplete="off" (click)="gear[card].hits[4]=0;debugg({card,i:4,val:0,hits:gear[card].hits,gear:gear[card]});debugg(gear)" [checked]="gear[card].hits[4]===0"> <label class="btn btn-light" for="{{card}}_4_1">+{{(4+1)*3}}</label>
            <input type="radio" class="btn-check" name="{{card}}_4_radio" id="{{card}}_4_2" autocomplete="off" (click)="gear[card].hits[4]=1;debugg({card,i:4,val:1,hits:gear[card].hits,gear:gear[card]});debugg(gear)" [checked]="gear[card].hits[4]===1"> <label class="btn btn-light" for="{{card}}_4_2">+{{(4+1)*3}}</label>
            <input type="radio" class="btn-check" name="{{card}}_4_radio" id="{{card}}_4_3" autocomplete="off" (click)="gear[card].hits[4]=2;debugg({card,i:4,val:2,hits:gear[card].hits,gear:gear[card]});debugg(gear)" [checked]="gear[card].hits[4]===2"> <label class="btn btn-light" for="{{card}}_4_3">+{{(4+1)*3}}</label>
            <input type="radio" class="btn-check" name="{{card}}_4_radio" id="{{card}}_4_4" autocomplete="off" (click)="gear[card].hits[4]=3;debugg({card,i:4,val:3,hits:gear[card].hits,gear:gear[card]});debugg(gear)" [checked]="gear[card].hits[4]===3"> <label class="btn btn-light" for="{{card}}_4_4">+{{(4+1)*3}}</label>
          </div>
        </div>
        <div style="display: flex;flex-direction: column;"><!--Right box-->
          <div *ngFor="let row of gear[card].subs" class="input-group sub-row">
            <input type="text" class="input-group-text" name="placeholder-{{row.stat}}" id="{{card}}_placeholder-{{row.stat}}">
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
